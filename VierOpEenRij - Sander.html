<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vier op een rij</title>
    <style>
        td{
            border: 2px solid red;
            width: 30px;
            height: 30px;
        }
        td:hover{
            background-color: grey;
        }
    </style>
    <script>
        let player = 1;
        let tableArray = [[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];
        let over = false;

        function placeStone(element){
            let mainTable = document.getElementById("mainTable");
            let tableRows = mainTable.rows;
            let ci = element.cellIndex;
            let ri = element.parentNode.rowIndex;
            console.log(ci +", "+ri);
            if(tableArray[ri][ci] != 0){
                alert("Dit vakje is al bezet!")
            }else if(over){
                
            }else{  
                while(ri < 5){
                    if (tableArray[ri+1][ci] != 0){
                        break
                    }
                    ri++;
                }
                tableArray[ri][ci] = player;
                if (player == 1){
                    tableRows[ri].cells[ci].style.backgroundColor = "yellow";
                    checkWin(ci, ri, player);
                    player = 2;
                }else{
                    tableRows[ri].cells[ci].style.backgroundColor = "red";
                    checkWin(ci, ri, player);
                    player = 1;
                }
            }
        }

        function checkWin(ci, ri, player){
            let wincon = player + "," + player + "," + player + "," + player;
            let stringArrays = [];
            stringArrays.push(tableArray[ri].toString());
            
            let column = []
            for(let i = 0; i < tableArray.length; i++){
                column.push(tableArray[i][ci]);
            }
            stringArrays.push(column.toString());

            let diag1 = [];
            let inc = 1;
            while(ci - inc > 0 && ri - inc > 0){
                inc++;
            }
            while(ci - inc <= 6 && ri - inc <= 5){
                diag1.push(tableArray[ri-inc][ci-inc]);
                inc--;
            }
            stringArrays.push(diag1.toString());

            let diag2 = [];
            inc = 1;
            while(ci + inc <= 6 && ri + inc <= 5){
                inc++;
            }
            while(ci + inc < 0 && ri + inc < 0){
                diag2.push(tableArray[ri+inc][ci+inc]);
                inc--;
            }
            stringArrays.push(diag2.toString());


            for(let i = 0; i < stringArrays.length; i++){
                if(stringArrays[i].includes(wincon)){
                    alert("Speler " + player + " heeft gewonnen!");
                    over = true;
                }
            }
        }
    </script>
</head>
<body>
    <table id="mainTable">
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
        <tr>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
            <td onclick="placeStone(this)"></td>
        </tr>
    </table>
</body>
</html>